Traceback (most recent call last):
  File "C:\laragon\bin\python\python-3.10\lib\site-packages\jupyter_cache\executors\utils.py", line 58, in single_nb_execution
    executenb(
  File "C:\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "C:\Users\Rizky\AppData\Roaming\Python\Python310\site-packages\jupyter_core\utils\__init__.py", line 165, in wrapped
    return loop.run_until_complete(inner)
  File "C:\laragon\bin\python\python-3.10\lib\asyncio\base_events.py", line 646, in run_until_complete
    return future.result()
  File "C:\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "C:\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "C:\laragon\bin\python\python-3.10\lib\site-packages\nbclient\client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import pandas as pd
import networkx as nx
import matplotlib.pyplot as plt

# -------------------------------------------------------------------
# Memuat Data 
# -------------------------------------------------------------------

file_path = 'pagerank500_edges_berita_new.csv'
try:
    df = pd.read_csv(
        file_path,
        comment='#',
        sep=','  
    )
    
    print("Data berhasil dimuat. Berikut 5 baris pertama:")
    print(df.head())
    print("\nInfo DataFrame:")
    df.info()

except FileNotFoundError:
    print(f"Error: File '{file_path}' tidak ditemukan.")
except Exception as e:
    print(f"Terjadi error saat membaca file: {e}")


# -------------------------------------------------------------------
# Membuat Graf Penuh (untuk Analisis)
# -------------------------------------------------------------------
# buat graf berarah (DiGraph) dari DataFrame pandas
# -------------------------------------------------------------------

if 'df' in locals():
    G_full = nx.from_pandas_edgelist(
        df,
        source='Halaman Sumber',
        target='Link Keluar (Internal)',
        create_using=nx.DiGraph() # Penting: create_using=nx.DiGraph()
    )
    
    print("\n--- Informasi Graf Penuh ---")
    print(f"Jumlah Node (halaman): {G_full.number_of_nodes()}")
    print(f"Jumlah Edge (tautan): {G_full.number_of_edges()}")

# -------------------------------------------------------------------
# Membuat Subgraph (untuk Visualisasi)
# -------------------------------------------------------------------
# ambil 100 edge pertama dari data untuk digambar
# -------------------------------------------------------------------

if 'df' in locals():
    df_sample = df.head(100)
    G_sample = nx.from_pandas_edgelist(
        df_sample,
        source='Halaman Sumber',
        target='Link Keluar (Internal)',
        create_using=nx.DiGraph()
    )

    print("\n--- Informasi Subgraph (untuk Visualisasi) ---")
    print(f"Jumlah Node (sample): {G_sample.number_of_nodes()}")
    print(f"Jumlah Edge (sample): {G_sample.number_of_edges()}")

# -------------------------------------------------------------------
# Visualisasi Subgraph
# -------------------------------------------------------------------
# Menggambar G_sample (bukan G_full)
# -------------------------------------------------------------------

if 'G_sample' in locals():
    print("\nMembuat visualisasi subgraph...")
    
    # Mengatur ukuran gambar
    plt.figure(figsize=(15, 12))
    
    # Menentukan layout
    # 'spring_layout' adalah layout yang baik untuk graf umum
    # k=0.5 dan iterations=50 membantu 'menyebarkan' node
    pos = nx.spring_layout(G_sample, k=0.5, iterations=50, seed=42)
    
    # Menggambar graf
    nx.draw(
        G_sample,
        pos,
        with_labels=True,      # Tampilkan label (ID node)
        node_color='skyblue',  # Warna node
        node_size=800,         # Ukuran node
        font_size=9,           # Ukuran font label
        edge_color='gray',     # Warna edge
        arrows=True,           # Tampilkan panah (karena ini DiGraph)
        arrowstyle='-|>',      # Gaya panah
        arrowsize=15           # Ukuran panah
    )
    
    plt.title("Visualisasi Subgraph (100 Tautan Pertama)")
    
    # Menyimpan gambar ke file
    output_image_path = "subgraph.png"
    plt.savefig(output_image_path)
    
    print(f"Visualisasi subgraph telah disimpan ke '{output_image_path}'")
    
# -------------------------------------------------------------------
# Analisis Graf Penuh (Menghitung PageRank)
# -------------------------------------------------------------------
# gunakan graf penuh (G_full) untuk analisis
# -------------------------------------------------------------------

if 'G_full' in locals():
    print("\nMenghitung PageRank pada GRAF PENUH...")
    # Ini mungkin butuh beberapa detik
    pagerank_scores = nx.pagerank(G_full, alpha=0.85)
    
    # Mengurutkan node berdasarkan skor PageRank
    sorted_pagerank = sorted(pagerank_scores.items(), key=lambda item: item[1], reverse=True)
    
    print("\n--- 5 Node Teratas Berdasarkan PageRank ---")
    for i, (node, score) in enumerate(sorted_pagerank[:5]):
        print(f"{i+1}. Node {node}: {score:.8f}")

    # Variabel baru untuk menyimpan ID node teratas
    top_node_id = None
    if sorted_pagerank:
        top_node_id = sorted_pagerank[0][0]
        print(f"\nNode teratas adalah: {top_node_id}")

# -------------------------------------------------------------------
# Analisis Pengikut (In-Degree) dan Diikuti (Out-Degree)
# -------------------------------------------------------------------

    print("\nMenghitung Jumlah Pengikut (In-Degree) dan Diikuti (Out-Degree)...")
    
    # Menghitung in-degree (link masuk / pengikut)
    # Ini adalah DegreeView: (node, jumlah_pengikut)
    in_degrees = G_full.in_degree()
    
    # Menghitung out-degree (link keluar / diikuti)
    # Ini adalah DegreeView: (node, jumlah_diikuti)
    out_degrees = G_full.out_degree()
    
    # Mengurutkan berdasarkan 'Pengikut' (In-Degree) terbanyak
    sorted_in_degree = sorted(in_degrees, key=lambda item: item[1], reverse=True)
    
    # Mengurutkan berdasarkan 'Diikuti' (Out-Degree) terbanyak
    sorted_out_degree = sorted(out_degrees, key=lambda item: item[1], reverse=True)
    
    print("\n--- 5 Node Teratas Berdasarkan Jumlah Pengikut (In-Degree) ---")
    print("(Node yang paling banyak di-link oleh halaman lain)")
    for i, (node, degree) in enumerate(sorted_in_degree[:5]):
        print(f"{i+1}. Node {node}: {degree} pengikut")
        
    print("\n--- 5 Node Teratas Berdasarkan Jumlah Diikuti (Out-Degree) ---")
    print("(Node yang paling banyak me-link ke halaman lain)")
    for i, (node, degree) in enumerate(sorted_out_degree[:5]):
        print(f"{i+1}. Node {node}: mengikuti {degree} halaman")
    
    # Menampilkan info untuk node teratas dari PageRank (jika ada)
    if top_node_id is not None:
        print(f"\n--- Analisis Detail Node PageRank Teratas (Node {top_node_id}) ---")
        # G_full.in_degree(node) mengambil nilai spesifik untuk node itu
        print(f"Jumlah Pengikut (In-Degree): {G_full.in_degree(top_node_id)}")
        print(f"Jumlah Diikuti (Out-Degree): {G_full.out_degree(top_node_id)}")
------------------


[1;31m---------------------------------------------------------------------------[0m
[1;31mModuleNotFoundError[0m                       Traceback (most recent call last)
Cell [1;32mIn[1], line 2[0m
[0;32m      1[0m [38;5;28;01mimport[39;00m[38;5;250m [39m[38;5;21;01mpandas[39;00m[38;5;250m [39m[38;5;28;01mas[39;00m[38;5;250m [39m[38;5;21;01mpd[39;00m
[1;32m----> 2[0m [38;5;28;01mimport[39;00m[38;5;250m [39m[38;5;21;01mnetworkx[39;00m[38;5;250m [39m[38;5;28;01mas[39;00m[38;5;250m [39m[38;5;21;01mnx[39;00m
[0;32m      3[0m [38;5;28;01mimport[39;00m[38;5;250m [39m[38;5;21;01mmatplotlib[39;00m[38;5;21;01m.[39;00m[38;5;21;01mpyplot[39;00m[38;5;250m [39m[38;5;28;01mas[39;00m[38;5;250m [39m[38;5;21;01mplt[39;00m
[0;32m      5[0m [38;5;66;03m# -------------------------------------------------------------------[39;00m
[0;32m      6[0m [38;5;66;03m# Memuat Data [39;00m
[0;32m      7[0m [38;5;66;03m# -------------------------------------------------------------------[39;00m

[1;31mModuleNotFoundError[0m: No module named 'networkx'

